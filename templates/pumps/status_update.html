{% extends 'base.html' %}
{% load static %}

{% block page_title %}Update Pump Status{% endblock %}
{% block page_description %}Quickly change the operational status of Pump #{{ pump.pump_number }}.{% endblock %}

{% block content %}

<div class="max-w-sm mx-auto bg-white p-8 rounded-xl shadow-lg border border-gray-100">
    <h3 class="text-lg font-semibold text-gray-900 mb-4">
        Set Status for Pump #{{ pump.pump_number }}
    </h3>
    <p class="text-sm text-gray-600 mb-6">
        Currently at **{{ pump.station.name }}** ({{ pump.fuel_type }}). Current Status: 
        <span class="font-medium 
            {% if pump.status == 'active' %}text-green-600
            {% elif pump.status == 'offline' %}text-red-600
            {% else %}text-yellow-600{% endif %}">
            {{ pump.get_status_display|upper }}
        </span>
    </p>

    <form method="post" action="{% url 'pump_status_update' pump_id=pump.pk %}" class="space-y-6">
        {% csrf_token %}

        <div>
            <label for="id_status" class="block text-sm font-medium text-gray-700 mb-1">Select New Status</label>
            <select name="status" id="id_status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-brand-blue focus:border-brand-blue">
                {% for value, label in pump.STATUS_CHOICES %}
                    <option value="{{ value }}" {% if pump.status == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="flex justify-end space-x-3 pt-4">
            <a href="{% url 'pump_list' %}" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors">
                Cancel
            </a>
            <button type="submit" class="px-6 py-2 text-sm font-medium text-white bg-brand-blue rounded-lg shadow-md hover:bg-brand-blue/90 transition-colors">
                Update Status
            </button>
        </div>
    </form>
</div>

{% endblock %}